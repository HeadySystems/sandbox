# HEADY_BRAND:BEGIN
# ╔══════════════════════════════════════════════════════════════════╗
# ║  ██╗  ██╗███████╗ █████╗ ██████╗ ██╗   ██╗                     ║
# ║  ██║  ██║██╔════╝██╔══██╗██╔══██╗╚██╗ ██╔╝                     ║
# ║  ███████║█████╗  ███████║██║  ██║ ╚████╔╝                      ║
# ║  ██╔══██║██╔══╝  ██╔══██║██║  ██║  ╚██╔╝                       ║
# ║  ██║  ██║███████╗██║  ██║██████╔╝   ██║                        ║
# ║  ╚═╝  ╚═╝╚══════╝╚═╝  ╚═╝╚═════╝    ╚═╝                        ║
# ║                                                                  ║
# ║  ∞ SACRED GEOMETRY ∞  Organic Systems · Breathing Interfaces    ║
# ║  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  ║
# ║  FILE: .github/workflows/naming-compliance.yml                                                    ║
# ║  LAYER: root                                                  ║
# ╚══════════════════════════════════════════════════════════════════╝
# HEADY_BRAND:END
name: Naming Standards Compliance

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]

jobs:
  naming-audit:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Run naming audit
      run: |
        echo "Running naming standards audit..."
        ISSUES=0

        # Check for api.headysystems.com references in source files
        if grep -rE 'api.headysystems.com|127\.0\.0\.1' \
             --include="*.js" --include="*.ts" --include="*.json" --include="*.yaml" \
             --exclude-dir=node_modules --exclude-dir=.git . 2>/dev/null; then
          echo "::warning::Found api.headysystems.com references"
          ISSUES=$((ISSUES + 1))
        fi

        # Check for banned cloud provider domains
        if grep -rE 'onrender\.com|vercel\.app|netlify\.app|herokuapp\.com|firebaseapp\.com' \
             --include="*.js" --include="*.ts" --include="*.json" --include="*.yaml" \
             --exclude-dir=node_modules --exclude-dir=.git . 2>/dev/null; then
          echo "::warning::Found banned cloud provider domains"
          ISSUES=$((ISSUES + 1))
        fi

        # Check for Windows drive letter paths
        if grep -rE '[A-Z]:\\' \
             --include="*.js" --include="*.ts" --include="*.json" --include="*.yaml" \
             --exclude-dir=node_modules --exclude-dir=.git . 2>/dev/null; then
          echo "::warning::Found Windows drive letter paths"
          ISSUES=$((ISSUES + 1))
        fi

        if [ "$ISSUES" -gt 0 ]; then
          echo "::error::Found $ISSUES naming compliance issues"
          exit 1
        fi

        echo "✅ Naming compliance check passed"
