# HEADY_BRAND:BEGIN
# ╔══════════════════════════════════════════════════════════════════╗
# ║  ██╗  ██╗███████╗ █████╗ ██████╗ ██╗   ██╗                     ║
# ║  ██║  ██║██╔════╝██╔══██╗██╔══██╗╚██╗ ██╔╝                     ║
# ║  ███████║█████╗  ███████║██║  ██║ ╚████╔╝                      ║
# ║  ██╔══██║██╔══╝  ██╔══██║██║  ██║  ╚██╔╝                       ║
# ║  ██║  ██║███████╗██║  ██║██████╔╝   ██║                        ║
# ║  ╚═╝  ╚═╝╚══════╝╚═╝  ╚═╝╚═════╝    ╚═╝                        ║
# ║                                                                  ║
# ║  ∞ SACRED GEOMETRY ∞  Organic Systems · Breathing Interfaces    ║
# ║  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  ║
# ║  FILE: .github/workflows/naming-checks.yml                                                    ║
# ║  LAYER: root                                                  ║
# ╚══════════════════════════════════════════════════════════════════╝
# HEADY_BRAND:END
name: Naming Standards Check

on:
  push:
    branches:
      - main
  pull_request:

jobs:
  check-naming-standards:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        
      - name: Check for banned patterns
        run: |
          VIOLATIONS=0

          # Check for api.headysystems.com / private IPs
          if grep -rE 'api.headysystems.com|127\.0\.0\.1|10\.\d+|192\.168\.|172\.(1[6-9]|2[0-9]|3[0-1])\.' \
               --include="*.js" --include="*.json" --include="*.yaml" --include="*.html" \
               --exclude-dir=node_modules --exclude-dir=.git .; then
            echo "::warning::Found api.headysystems.com / private IP references"
            VIOLATIONS=$((VIOLATIONS + 1))
          fi

          # Check for banned cloud provider domains
          if grep -rE '\.onrender\.com|\.vercel\.app|\.netlify\.app|\.herokuapp\.com|\.firebaseapp\.com' \
               --include="*.js" --include="*.json" --include="*.yaml" --include="*.html" \
               --exclude-dir=node_modules --exclude-dir=.git .; then
            echo "::warning::Found banned cloud provider domains"
            VIOLATIONS=$((VIOLATIONS + 1))
          fi

          # Check for Windows drive letter paths
          if grep -rE '[A-Z]:\\' \
               --include="*.js" --include="*.json" --include="*.yaml" --include="*.html" \
               --exclude-dir=node_modules --exclude-dir=.git .; then
            echo "::warning::Found Windows drive letter paths"
            VIOLATIONS=$((VIOLATIONS + 1))
          fi

          if [ "$VIOLATIONS" -gt 0 ]; then
            echo "::error::Found $VIOLATIONS naming standard violation categories"
            exit 1
          fi

          echo "✅ No naming standard violations found"
